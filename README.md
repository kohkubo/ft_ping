# ft_ping

ğŸ“ A custom implementation of the classic `ping` command written in C

## æ¦‚è¦

ft_pingã¯ã€ICMPã‚¨ã‚³ãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¦ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹pingã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè£…ã§ã™ã€‚

## æ©Ÿèƒ½

- **ICMPã‚¨ã‚³ãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡**: æŒ‡å®šã•ã‚ŒãŸãƒ›ã‚¹ãƒˆã«pingãƒ‘ã‚±ãƒƒãƒˆã‚’é€ä¿¡
- **RTTæ¸¬å®š**: ãƒ©ã‚¦ãƒ³ãƒ‰ãƒˆãƒªãƒƒãƒ—ã‚¿ã‚¤ãƒ ã®æ¸¬å®šã¨çµ±è¨ˆæƒ…å ±ã®è¡¨ç¤º
- **ãƒ‘ã‚±ãƒƒãƒˆçµ±è¨ˆ**: é€ä¿¡ãƒ»å—ä¿¡ãƒ»ãƒ­ã‚¹ãƒˆãƒ»é‡è¤‡ãƒ‘ã‚±ãƒƒãƒˆã®çµ±è¨ˆ
- **ãƒ›ã‚¹ãƒˆåè§£æ±º**: ãƒ‰ãƒ¡ã‚¤ãƒ³åã‹ã‚‰IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¸ã®è‡ªå‹•å¤‰æ›
- **ã‚·ã‚°ãƒŠãƒ«ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: SIGINT/SIGTERMã§ã®é©åˆ‡ãªçµ‚äº†å‡¦ç†
- **Verboseãƒ¢ãƒ¼ãƒ‰**: è©³ç´°ãªå‡ºåŠ›ã‚ªãƒ—ã‚·ãƒ§ãƒ³

## å¿…è¦ãªç’°å¢ƒ

- Linux/macOS
- GCC ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©
- rootæ¨©é™ï¼ˆRAWã‚½ã‚±ãƒƒãƒˆä½¿ç”¨ã®ãŸã‚ï¼‰
- Dockerï¼ˆé–‹ç™ºç’°å¢ƒç”¨ï¼‰

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒ

```bash
git clone https://github.com/kohkubo/ft_ping.git
cd ft_ping
make ft_ping
```

### Dockerç’°å¢ƒ

```bash
# Dockerç’°å¢ƒã‚’ãƒ“ãƒ«ãƒ‰
make build

# ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•
make up

# ã‚³ãƒ³ãƒ†ãƒŠã«å…¥ã‚‹
make exec

# ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ãƒ“ãƒ«ãƒ‰
make ping
```

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬çš„ãªä½¿ç”¨æ³•

```bash
# åŸºæœ¬çš„ãªping
./ft_ping google.com

# Verboseãƒ¢ãƒ¼ãƒ‰
./ft_ping -v google.com

# ãƒ˜ãƒ«ãƒ—è¡¨ç¤º
./ft_ping --help
```

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³

- `-v` : Verboseãƒ¢ãƒ¼ãƒ‰ - è©³ç´°ãªå‡ºåŠ›ã‚’è¡¨ç¤º
- `--help` : ãƒ˜ãƒ«ãƒ—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
- `--usage` : ä½¿ç”¨æ³•ã‚’è¡¨ç¤º

## å‡ºåŠ›ä¾‹

```
PING google.com (172.217.175.14): 56 data bytes
64 bytes from 172.217.175.14: icmp_seq=0 ttl=115 time=12.345 ms
64 bytes from 172.217.175.14: icmp_seq=1 ttl=115 time=11.234 ms
64 bytes from 172.217.175.14: icmp_seq=2 ttl=115 time=13.456 ms
^C
--- google.com ping statistics ---
3 packets transmitted, 3 packets received, 0.0% packet loss
round-trip min/avg/max/stddev = 11.234/12.345/13.456/0.912 ms
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
ft_ping/
â”œâ”€â”€ src/                    # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ main.c             # ãƒ¡ã‚¤ãƒ³é–¢æ•°
â”‚   â”œâ”€â”€ ping_args.c        # å¼•æ•°è§£æ
â”‚   â”œâ”€â”€ ping_packet.c      # ãƒ‘ã‚±ãƒƒãƒˆé€å—ä¿¡
â”‚   â”œâ”€â”€ ping_resolve.c     # ãƒ›ã‚¹ãƒˆåè§£æ±º
â”‚   â””â”€â”€ ping_signal.c      # ã‚·ã‚°ãƒŠãƒ«å‡¦ç†
â”œâ”€â”€ include/               # ãƒ˜ãƒƒãƒ€ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ ping.h            # å…±é€šå®šç¾©
â”‚   â”œâ”€â”€ ping_args.h       # å¼•æ•°è§£æ
â”‚   â”œâ”€â”€ ping_packet.h     # ãƒ‘ã‚±ãƒƒãƒˆå‡¦ç†
â”‚   â”œâ”€â”€ ping_resolve.h    # ãƒ›ã‚¹ãƒˆåè§£æ±º
â”‚   â””â”€â”€ ping_signal.h     # ã‚·ã‚°ãƒŠãƒ«å‡¦ç†
â”œâ”€â”€ tests/                 # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ ping_error_test.sh # ã‚¨ãƒ©ãƒ¼ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ docs/                  # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â””â”€â”€ test.md           # ãƒ†ã‚¹ãƒˆè¨­å®š
â”œâ”€â”€ docker/                # Dockeré–¢é€£
â”‚   â”œâ”€â”€ Dockerfile        # Dockerè¨­å®š
â”‚   â””â”€â”€ docker-compose.yml # Docker Composeè¨­å®š
â”œâ”€â”€ obj/                   # ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
â”œâ”€â”€ Makefile              # ãƒ“ãƒ«ãƒ‰è¨­å®š
â””â”€â”€ README.md             # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

## é–‹ç™º

### ãƒ“ãƒ«ãƒ‰

```bash
# é€šå¸¸ãƒ“ãƒ«ãƒ‰
make ft_ping

# ã‚¯ãƒªãƒ¼ãƒ³ãƒ“ãƒ«ãƒ‰
make clean
make ft_ping
```

### ãƒ†ã‚¹ãƒˆ

```bash
# åŸºæœ¬ãƒ†ã‚¹ãƒˆ
make ping-run

# ã‚¨ãƒ©ãƒ¼ãƒ†ã‚¹ãƒˆ
./tests/ping_error_test.sh

# Dockerç’°å¢ƒã§ã®ãƒ†ã‚¹ãƒˆ
make exec
# ã‚³ãƒ³ãƒ†ãƒŠå†…ã§
make ping-run
```

### ãƒ‡ãƒãƒƒã‚°

```bash
# ãƒ‡ãƒãƒƒã‚°ãƒ“ãƒ«ãƒ‰
CFLAGS="-g -O0" make ft_ping

# Valgrindã§ã®ãƒ¡ãƒ¢ãƒªãƒã‚§ãƒƒã‚¯
valgrind --leak-check=full ./ft_ping google.com
```

## æŠ€è¡“çš„ãªè©³ç´°

### ICMPãƒ—ãƒ­ãƒˆã‚³ãƒ«

- ICMP Echo Request (Type 8) ã‚’é€ä¿¡
- ICMP Echo Reply (Type 0) ã‚’å—ä¿¡
- å„ãƒ‘ã‚±ãƒƒãƒˆã«ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ç•ªå·ã¨ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’åŸ‹ã‚è¾¼ã¿

### RTTè¨ˆç®—

- é«˜ç²¾åº¦ã‚¿ã‚¤ãƒãƒ¼ï¼ˆ`clock_gettime`ï¼‰ã‚’ä½¿ç”¨
- ãƒã‚¤ã‚¯ãƒ­ç§’å˜ä½ã§ã®æ™‚é–“æ¸¬å®š
- çµ±è¨ˆå€¤ï¼ˆmin/avg/max/stddevï¼‰ã®è¨ˆç®—

### ãƒ¡ãƒ¢ãƒªç®¡ç†

- é©åˆ‡ãªãƒªã‚½ãƒ¼ã‚¹ç®¡ç†
- ã‚·ã‚°ãƒŠãƒ«å—ä¿¡æ™‚ã®å®‰å…¨ãªçµ‚äº†å‡¦ç†
- ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã®é˜²æ­¢

## åˆ¶é™äº‹é …

- IPv4ã®ã¿ã‚µãƒãƒ¼ãƒˆï¼ˆIPv6ã¯æœªå¯¾å¿œï¼‰
- Raw socketã®ä½¿ç”¨ã«ã‚ˆã‚Š rootæ¨©é™ãŒå¿…è¦
- æœ€å¤§1024å€‹ã®pingã«åˆ¶é™
- å›ºå®šã®pingé–“éš”ï¼ˆ1ç§’ï¼‰

## å‚è€ƒè³‡æ–™

- [Debian Manpages](https://manpages.debian.org/)
- [RFC 792 - Internet Control Message Protocol](https://tools.ietf.org/html/rfc792)
